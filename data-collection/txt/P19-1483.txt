



















































Handling Divergent Reference Texts when Evaluating Table-to-Text Generation


Proceedings of the 57th Annual Meeting of the Association for Computational Linguistics, pages 4884–4895
Florence, Italy, July 28 - August 2, 2019. c©2019 Association for Computational Linguistics

4884

Handling Divergent Reference Texts when Evaluating
Table-to-Text Generation

Bhuwan Dhingra† ∗ Manaal Faruqui‡ Ankur Parikh‡ Ming-Wei Chang‡
Dipanjan Das‡ William W. Cohen†‡

† Carnegie Mellon University
‡ Google Research

bdhingra@cs.cmu.edu
{mfaruqui,aparikh,mingweichang,dipanjand,wcohen}@google.com

Abstract

Automatically constructed datasets for gener-
ating text from semi-structured data (tables),
such as WikiBio (Lebret et al., 2016), of-
ten contain reference texts that diverge from
the information in the corresponding semi-
structured data. We show that metrics which
rely solely on the reference texts, such as
BLEU and ROUGE, show poor correlation
with human judgments when those references
diverge. We propose a new metric, PAR-
ENT, which aligns n-grams from the refer-
ence and generated texts to the semi-structured
data before computing their precision and re-
call. Through a large scale human evalua-
tion study of table-to-text models for WikiBio,
we show that PARENT correlates with human
judgments better than existing text generation
metrics. We also adapt and evaluate the infor-
mation extraction based evaluation proposed
in Wiseman et al. (2017), and show that PAR-
ENT has comparable correlation to it, while
being easier to use. We show that PARENT
is also applicable when the reference texts are
elicited from humans using the data from the
WebNLG challenge.1

1 Introduction

The task of generating natural language descrip-
tions of structured data (such as tables) (Kukich,
1983; McKeown, 1985; Reiter and Dale, 1997)
has seen a growth in interest with the rise of se-
quence to sequence models that provide an easy
way of encoding tables and generating text from
them (Lebret et al., 2016; Wiseman et al., 2017;
Novikova et al., 2017b; Gardent et al., 2017).

For text generation tasks, the only gold standard
metric is to show the output to humans for judg-
ing its quality, but this is too expensive to apply

∗Work done during an internship at Google.
1Code and Data: http://www.cs.cmu.edu/

~bdhingra/pages/parent.html

repeatedly anytime small modifications are made
to a system. Hence, automatic metrics that com-
pare the generated text to one or more reference
texts are routinely used to compare models (Ban-
galore et al., 2000). For table-to-text generation,
automatic evaluation has largely relied on BLEU
(Papineni et al., 2002) and ROUGE (Lin, 2004).
The underlying assumption behind these metrics
is that the reference text is gold-standard, i.e., it
is the ideal target text that a system should gener-
ate. In practice, however, when datasets are col-
lected automatically and heuristically, the refer-
ence texts are often not ideal. Figure 1 shows an
example from the WikiBio dataset (Lebret et al.,
2016). Here the reference contains extra informa-
tion which no system can be expected to produce
given only the associated table. We call such ref-
erence texts divergent from the table.

We show that existing automatic metrics, in-
cluding BLEU, correlate poorly with human judg-
ments when the evaluation sets contain divergent
references (§5.4). For many table-to-text genera-
tion tasks, the tables themselves are in a pseudo-
natural language format (e.g., WikiBio, WebNLG
(Gardent et al., 2017), and E2E-NLG (Dušek et al.,
2019)). In such cases we propose to compare the
generated text to the underlying table as well to
improve evaluation. We develop a new metric,
PARENT (Precision And Recall of Entailed N-
grams from the Table) (§3). When computing pre-
cision, PARENT effectively uses a union of the
reference and the table, to reward correct informa-
tion missing from the reference. When computing
recall, it uses an intersection of the reference and
the table, to ignore extra incorrect information in
the reference. The union and intersection are com-
puted with the help of an entailment model to de-
cide if a text n-gram is entailed by the table.2 We

2Here “entailed” means can be reasonably inferred from

http://www.cs.cmu.edu/~bdhingra/pages/parent.html
http://www.cs.cmu.edu/~bdhingra/pages/parent.html


4885

Figure 1: A table from the WikiBio dataset (right), its reference description and three hypothetical generated texts
with scores assigned to them by automatic evaluation metrics. Text which cannot be inferred from the table is in
red, and text which can be inferred but isn’t present in the reference is in green. PARENT is our proposed metric.

show that this method is more effective than us-
ing the table as an additional reference. Our main
contributions are:

• We conduct a large-scale human evaluation of
the outputs from 16 table-to-text models on
1100 examples from the WikiBio dataset, many
of which have divergent references (§5.2).

• We propose a new metric, PARENT (§3), and
show that it improves correlation with human
judgments over existing metrics, both when
comparing similar systems (such as different
hyperparameters of a neural network) and when
comparing vastly different systems (such as
template-based and neural models).

• We also develop information extraction based
metrics, inspired from Wiseman et al. (2017),
by training a model to extract tables from the
reference texts (§4). We find that these metrics
have comparable correlation to PARENT, with
the latter being easier to use out of the box.

• We analyze the sensitivity of the metrics to di-
vergence by collecting labels for which refer-
ences contain only information also present in
the tables. We show that PARENT maintains
high correlation as the number of such exam-
ples is varied. (§5.5).

• We also demonstrate the applicability of PAR-
ENT on the data released as part of the
WebNLG challenge (Gardent et al., 2017),
where the references are elicited from humans,
and hence are of high quality (§5.4).

2 Table-to-Text Generation

We briefly review the task of generating natu-
ral language descriptions of semi-structured data,
which we refer to as tables henceforth (Barzilay

the corresponding table. In practice, we use simple lexical
entailment models to determine this.

and Lapata, 2005; Liang et al., 2009). Tables can
be expressed as set of records T = {rk}Kk=1,
where each record is a tuple (entity, attribute,
value). When all the records are about the same
entity, we can truncate the records to (attribute,
value) pairs. For example, for the table in Figure 1,
the records are {(Birth Name, Michael Dahlquist),
(Born, December 22 1965), ...}. The task is to gen-
erate a text G which summarizes the records in a
fluent and grammatical manner.3 For training and
evaluation we further assume that we have a ref-
erence description R available for each table. We
let DM = {(T i, Ri, Gi)}Ni=1 denote an evaluation
set of tables, references and texts generated from
a model M , and Rin, G

i
n denote the collection of

n-grams of order n in Ri and Gi, respectively. We
use #Rin(g) to denote the count of n-gram g in
Rin, and #Gin,Rin(g) to denote the minimum of its
counts in Rin and G

i
n. Our goal is to assign a score

to the model, which correlates highly with human
judgments of the quality of that model.

Divergent References. In this paper we are in-
terested in the case where reference texts diverge
from the tables. In Figure 1, the reference, though
technically correct and fluent, mentions informa-
tion which cannot be gleaned from the associ-
ated table. It also fails to mention useful infor-
mation which a generation system might correctly
include (e.g. candidate 3 in the figure). We call
such references divergent from the associated ta-
ble. This phenomenon is quite common – in Wik-
iBio we found that 62% of the references men-
tion extra information (§5.5). Divergence is com-
mon in human-curated translation datasets as well
(Carpuat et al., 2017; Vyas et al., 2018).

How does divergence affect automatic evalua-

3In some cases the system is expected to summarize all
the records (e.g. WebNLG); in others the system is expected
to only summarize the salient records (e.g. WikiBio).



4886

tion? As a motivating example, consider the three
candidate generations shown in Figure 1. Clearly,
candidate 1 is the worst since it “hallucinates”
false information, and candidate 3 is the best since
it is correct and mentions more information than
candidate 2. However, BLEU and ROUGE, which
only compare the candidates to the reference, pe-
nalize candidate 3 for both excluding the divergent
information in the reference (in red) and includ-
ing correct information from the table (in green).4

PARENT, which compares to both the table and
reference, correctly ranks the three candidates.

3 PARENT

PARENT evaluates each instance (T i, Ri, Gi)
separately, by computing the precision and recall
of Gi against both T i and Ri.

Entailment Probability. The table is in a semi-
structured form, and hence not directly compa-
rable to the unstructured generated or reference
texts. To bridge this gap, we introduce the notion
of entailment probability, which we define as the
probability that the presence of an n-gram g in a
text is “correct” given the associated table. We de-
note this probability as w(g) = Pr(g ⇐ T i). Es-
timating this probability is in itself a challenging
language understanding task, since the informa-
tion in the table may be expressed in varied forms
in text. Here, we describe two simple models of
lexical entailment, inspired by work on the Recog-
nizing Textual Entailment Challenge (Dagan et al.,
2006). We found these simple models to be effec-
tive; while more sophisticated models may be used
if there are complex inferences between the table
and text, they are beyond the scope of this paper.

1. Word Overlap Model: Let T̄ i denote all the
lexical items present in the table T i, including
both attribute names and their values. Then,
w(g) =

∑n
j=1 1(gj ∈ T̄ i)/n, where n is the

length of g, and gj is the jth token in g.

2. Co-occurrence Model: (Glickman and Dagan,
2005) Originally proposed for the RTE task,
this model computes the probability of a term
gj in the n-gram being entailed by the table as
the maximum of its probabilities of being en-

4BLEU is usually computed at the corpus-level, however
here we show its value for a single sentence purely for illus-
tration purposes. The remaining BLEU scores in this paper
are all at the corpus-level.

tailed by each lexical item v in the table:

Pr(gj ⇐ T i) = max
v∈T̄ i

Pr(gj ⇐ v). (1)

Pr(gj ⇐ v) is estimated using co-occurrence
counts from a training set of table-reference
pairs. Then the overall probability of the n-
gram being entailed is taken as the geometric

average w(g) =
(∏n

j=1 Pr(gj ⇐ T i)
)1/n

.5

We note that these models are not sensitive to
paraphrases between the table and text. For tasks
where this is important, embedding-based similar-
ities may be used, but those are beyond the scope
of this paper. Next we discuss how to compute the
precision and recall of the generation.

Entailed Precision. When computing precision,
we want to check what fraction of the n-grams in
Gin are correct. We consider an n-gram g to be
correct either if it occurs in the reference Rin

6, or
if it has a high probability of being entailed by the
table (i.e. w(g) is high). Let Pr(g ∈ Rin) =
#

Gin,R
i
n

(g)

#
Gin

(g) denote the probability that an n-gram

in Gin also appears in R
i
n. Then, the entailed pre-

cision Enp for n-grams of order n is given by:

Enp =∑
g∈Gin

[
Pr(g ∈ Rin) + Pr(g /∈ Rin)w(g)

]
#Gin(g)∑

g∈Gin
#Gin(g)

,

=

∑
g∈Gin

#Gin(g)w(g) + #Gin,Rin(g)[1− w(g)]∑
g∈Gin

#Gin(g)
.

(2)

In words, an n-gram receives a reward of 1 if it
appears in the reference, with probability Pr(g ∈
Rin), and otherwise it receives a reward of w(g).
Both numerator and denominator are weighted by
the count of the n-gram in Gin. Pr(g ∈ Rin) re-
wards an n-gram for appearing as many times as
it appears in the reference, not more. We combine
precisions for n-gram orders 1-4 using a geometric

5Glickman and Dagan (2005) used a product instead of
geometric mean. Here we use a geometric mean to ensure
that n-grams of different lengths have comparable probabili-
ties of being entailed.

6It is unlikely that an automated system produces the same
extra n-gram as present in the reference, thus a match with
the reference n-gram is considered positive. For example, in
Figure 1, it is highly unlikely that a system would produce
“Silkworm” when it is not present in the table.



4887

average, similar to BLEU:

Ep = exp

(
4∑

n=1

1

4
logEnp

)
(3)

Entailed Recall. We compute recall against
both the reference (Er(Ri)), to ensure proper sen-
tence structure in the generated text, and the table
(Er(T i)), to ensure that texts which mention more
information from the table get higher scores (e.g.
candidate 3 in Figure 1). These are combined us-
ing a geometric average:

Er = Er(R
i)(1−λ)Er(T

i)λ (4)

The parameter λ trades-off how much the gener-
ated text should match the reference, versus how
much it should cover information from the table.
The geometric average, which acts as an AND op-
eration, ensures that the overall recall is high only
when both the components are high. We found
this necessary to assign low scores to bad systems
which, for example, copy values from the table
without phrasing them in natural language.

When computing Er(Ri), divergent references
will have n-grams with low w(g). We want to ex-
clude these from the computation of recall, and
hence their contributions are weighted by w(g):

Enr (R
i) =

∑
g∈Rin #Gin,Rin(g)w(g)∑
g∈Rin #Rin(g)w(g)

. (5)

Similar to precision, we combine recalls for n =
1-4 using a geometric average to get Er(Ri).

For computing Er(T i), note that a table is a
set of records T i = {rk}Kk=1. For a record rk,
let r̄k denote its string value (such as “Michael
Dahlquist” or “December 22 1965”). Then:

Er(T
i) =

1

K

K∑
k=1

1

|r̄k|
LCS(r̄k, G

i), (6)

where r̄k denotes the number of tokens in the value
string, and LCS(x, y) is the length of the longest
common subsequence between x and y. The LCS
function, borrowed from ROUGE, ensures that en-
tity names in r̄k appear in the same order in the text
as the table. Higher values of Er(T i) denote that
more records are likely to be mentioned in Gi.

The entailed precision and recall are combined
into an F-score to give the PARENT metric for one
instance. The system-level PARENT score for a

modelM is the average of instance level PARENT
scores across the evaluation set:

1

N

N∑
i=1

PARENT (Gi, Ri, T i) (7)

Smoothing & Multiple References. The dan-
ger with geometric averages is that if any of the
components being averaged become 0, the average
will also be 0. Hence, we adopt a smoothing tech-
nique from Chen and Cherry (2014) that assigns
a small positive value � to any of Enp , E

n
r (R

i) and
Er(T

i) which are 0. When multiple references are
available for a table, we compute PARENT against
each reference and take the maximum as its overall
score, similar to METEOR (Denkowski and Lavie,
2014).

Choosing λ and �. To set the value of λ we can
tune it to maximize the correlation of the metric
with human judgments, when such data is avail-
able. When such data is not available, we can use
the recall of the reference against the table, using
Eq. 6, as the value of 1 − λ. The intuition here is
that if the recall of the reference against the table
is high, it already covers most of the information,
and we can assign it a high weight in Eq. 4. This
leads to a separate value of λ automatically set for
each instance.7 � is set to 10−5 for all experiments.

4 Evaluation via Information Extraction

Wiseman et al. (2017) proposed to use an auxil-
iary model, trained to extract structured records
from text, for evaluation. However, the extrac-
tion model presented in that work is limited to the
closed-domain setting of basketball game tables
and summaries. In particular, they assume that
each table has exactly the same set of attributes for
each entity, and that the entities can be identified
in the text via string matching. These assumptions
are not valid for the open-domain WikiBio dataset,
and hence we train our own extraction model to
replicate their evaluation scheme.

Our extraction system is a pointer-generator
network (See et al., 2017), which learns to produce
a linearized version of the table from the text.8 The
network learns which attributes need to be popu-
lated in the output table, along with their values.
It is trained on the training set of WikiBio. At test

7For WikiBio, on average λ = 0.6 using this heuristic.
8 All (attribute, value) pairs are merged into 1 long string

using special separator tokens between them.



4888

time we parsed the output strings into a set of (at-
tribute, value) tuples and compare it to the ground
truth table. The F-score of this text-to-table system
was 35.1%, which is comparable to other chal-
lenging open-domain settings (Huang et al., 2017).
More details are included in the Appendix A.1.

Given this information extraction system, we
consider the following metrics for evaluation,
along the lines of Wiseman et al. (2017). Con-
tent Selection (CS): F-score for the (attribute,
value) pairs extracted from the generated text
compared to those extracted from the reference.
Relation Generation (RG): Precision for the (at-
tribute, value) pairs extracted from the generated
text compared to those in the ground truth table.
RG-F: Since our task emphasizes the recall of in-
formation from the table as well, we consider an-
other variant which computes the F-score of the
extracted pairs to those in the table. We omit the
content ordering metric, since our extraction sys-
tem does not align records to the input text.

5 Experiments & Results

In this section we compare several automatic eval-
uation metrics by checking their correlation with
the scores assigned by humans to table-to-text
models. Specifically, given l models M1, . . . ,Ml,
and their outputs on an evaluation set, we show
these generated texts to humans to judge their
quality, and obtain aggregated human evaluation
scores for all the models, h̄ = (h1, . . . , hl) (§5.2).
Next, to evaluate an automatic metric, we com-
pute the scores it assigns to each model, ā =
(a1, . . . , al), and check the Pearson correlation be-
tween h̄ and ā (Graham and Baldwin, 2014).9

5.1 Data & Models

Our main experiments are on the WikiBio dataset
(Lebret et al., 2016), which is automatically con-
structed and contains many divergent references.
In §5.6 we also present results on the data released
as part of the WebNLG challenge.

We developed several models of varying qual-
ity for generating text from the tables in WikiBio.
This gives us a diverse set of outputs to evaluate
the automatic metrics on. Table 1 lists the mod-
els along with their hyperparameter settings and
their scores from the human evaluation (§5.2). Our
focus is primarily on neural sequence-to-sequence
methods since these are most widely used, but we

9We observed similar trends for Spearman correlation.

Name BeamSize
Length
Penalty

Beam
Rescoring

Human
Eval

References – – – 0.20 ± 0.03

Template – – – -0.19 ± 0.04
Seq2Seq 1 0 No -0.28 ± 0.03

Seq2Seq + Att 1 0 No -0.12 ± 0.03
PG-Net 1,4,8 0,1,2,3 No,Yes 0.40 ± 0.03

Table 1: Models used for WikiBio, with the human
evaluation scores for these model outputs and the ref-
erence texts. PG-Net: Pointer-Generator network.
Human scores computed using Thurstone’s method
(Tsukida and Gupta, 2011).

also include a template-based baseline. All neural
models were trained on the WikiBio training set.
Training details and sample outputs are included
in Appendices A.2 & A.3.

We divide these models into two categories and
measure correlation separately for both the cat-
egories. The first category, WikiBio-Systems,
includes one model each from the four families
listed in Table 1. This category tests whether a
metric can be used to compare different model
families with a large variation in the quality of
their outputs. The second category, WikiBio-
Hyperparams, includes 13 different hyperparam-
eter settings of PG-Net (See et al., 2017), which
was the best performing system overall. 9 of these
were obtained by varying the beam size and length
normalization penalty of the decoder network (Wu
et al., 2016), and the remaining 4 were obtained
by re-scoring beams of size 8 with the information
extraction model described in §4. All the models
in this category produce high quality fluent texts,
and differ primarily on the quantity and accuracy
of the information they express. Here we are test-
ing whether a metric can be used to compare simi-
lar systems with a small variation in performance.
This is an important use-case as metrics are often
used to tune hyperparameters of a model.

5.2 Human Evaluation

We collected human judgments on the quality of
the 16 models trained for WikiBio, plus the refer-
ence texts. Workers on a crowd-sourcing platform,
proficient in English, were shown a table with
pairs of generated texts, or a generated text and the
reference, and asked to select the one they prefer.
Figure 2 shows the instructions they were given.
Paired comparisons have been shown to be supe-
rior to rating scales for comparing generated texts



4889

Figure 2: Instructions to crowd-workers for comparing two generated texts.

(Callison-Burch et al., 2007). However, for mea-
suring correlation the comparisons need to be ag-
gregated into real-valued scores, h̄ = (h1, . . . , hl),
for each of the l = 16 models. For this, we use
Thurstone’s method (Tsukida and Gupta, 2011),
which assigns a score to each model based on how
many times it was preferred over an alternative.

The data collection was performed separately
for models in the WikiBio-Systems and WikiBio-
Hyperparams categories. 1100 tables were sam-
pled from the development set, and for each table
we got 8 different sentence pairs annotated across
the two categories, resulting in a total of 8800 pair-
wise comparisons. Each pair was judged by one
worker only which means there may be noise at
the instance-level, but the aggregated system-level
scores had low variance (cf. Table 1). In total
around 500 different workers were involved in the
annotation. References were also included in the
evaluation, and they received a lower score than
PG-Net, highlighting the divergence in WikiBio.

5.3 Compared Metrics

Text only: We compare BLEU (Papineni
et al., 2002), ROUGE (Lin, 2004), METEOR
(Denkowski and Lavie, 2014), CIDEr and CIDEr-
D (Vedantam et al., 2015) using their publicly
available implementations.
Information Extraction based: We compare the
CS, RG and RG-F metrics discussed in §4.
Text & Table: We compare a variant of BLEU,
denoted as BLEU-T, where the values from the
table are used as additional references. BLEU-
T draws inspiration from iBLEU (Sun and Zhou,
2012) but instead rewards n-grams which match
the table rather than penalizing them. For
PARENT, we compare both the word-overlap
model (PARENT-W) and the co-occurrence model
(PARENT-C) for determining entailment. We also
compare versions where a single λ is tuned on the
entire dataset to maximize correlation with human
judgments, denoted as PARENT*-W/C.

Metric
WikiBio
Systems

WikiBio
Hyperparams Avg

ROUGE 0.518±0.07C,W -0.585±0.15C,W -0.034
CIDEr 0.674±0.06C,W -0.516±0.15C,W 0.079
CIDEr-D 0.646±0.06C,W -0.372±0.16C,W 0.137
METEOR 0.697±0.06C,W -0.079±0.24C,W 0.309
BLEU 0.548±0.07C,W 0.407±0.15C,W 0.478

CS 0.735±0.06W -0.604±0.16C,W 0.066
BLEU-T 0.688±0.11W 0.587±0.14C,W 0.638
RG 0.645±0.07C,W 0.749±0.12 0.697
RG-F 0.753±0.06W 0.763±0.12 0.758

PARENT-C 0.776±0.05W 0.755±0.12 0.766
PARENT-W 0.912±0.03 0.763±0.12 0.838

PARENT*-C 0.976±0.01 0.793±0.11 0.885
PARENT*-W 0.982±0.01 0.844±0.10 0.913

Table 2: Correlation of metrics with human judgments
on WikiBio. A superscript of C/W indicates that the
correlation is significantly lower than that of PARENT-
C/W using a bootstrap confidence test for α = 0.1.

5.4 Correlation Comparison

We use bootstrap sampling (500 iterations) over
the 1100 tables for which we collected human an-
notations to get an idea of how the correlation of
each metric varies with the underlying data. In
each iteration, we sample with replacement, tables
along with their references and all the generated
texts for that table. Then we compute aggregated
human evaluation and metric scores for each of the
models and compute the correlation between the
two. We report the average correlation across all
bootstrap samples for each metric in Table 2. The
distribution of correlations for the best performing
metrics are shown in Figure 3.

Table 2 also indicates whether PARENT is sig-
nificantly better than a baseline metric. Graham
and Baldwin (2014) suggest using the William’s
test for this purpose, but since we are computing
correlations between only 4/13 systems at a time,
this test has very weak power in our case. Hence,
we use the bootstrap samples to obtain a 1 − α
confidence interval of the difference in correlation



4890

BLE
U
BLE

U-TRG-
F

PRT
-C

PRT
-W

PRT
*-W

0.4

0.6

0.8

1.0
WikiBio-Systems

BLE
U
BLE

U-TRG-
F

PRT
-C

PRT
-W

PRT
*-W

0.0

0.2

0.4

0.6

0.8

1.0
WikiBio-Hyperparams

Figure 3: Distribution of metric correlations across 500
bootstrap samples. PRT = PARENT.

between PARENT and any other metric and check
whether this is above 0 (Wilcox, 2016).

Correlations are higher for the systems cate-
gory than the hyperparams category. The latter
is a more difficult setting since very similar mod-
els are compared, and hence the variance of the
correlations is also high. Commonly used metrics
which only rely on the reference (BLEU, ROUGE,
METEOR, CIDEr) have only weak correlations
with human judgments. In the hyperparams cat-
egory, these are often negative, implying that tun-
ing models based on these may lead to selecting
worse models. BLEU performs the best among
these, and adding n-grams from the table as refer-
ences improves this further (BLEU-T).

Among the extractive evaluation metrics, CS,
which also only relies on the reference, has poor
correlation in the hyperparams category. RG-F,
and both variants of the PARENT metric achieve
the highest correlation for both settings. There is
no significant difference among these for the hy-
perparams category, but for systems, PARENT-W
is significantly better than the other two. While
RG-F needs a full information extraction pipeline
in its implementation, PARENT-C only relies on
co-occurrence counts, and PARENT-W can be
used out-of-the-box for any dataset. To our knowl-
edge, this is the first rigorous evaluation of using
information extraction for generation evaluation.

On this dataset, the word-overlap model showed
higher correlation than the co-occurrence model
for entailment. In §5.6 we will show that for
the WebNLG dataset, where more paraphrasing
is involved between the table and text, the oppo-
site is true. Lastly, we note that the heuristic for
selecting λ is sufficient to produce high correla-
tions for PARENT, however, if human annotations
are available, this can be tuned to produce signifi-
cantly higher correlations (PARENT*-W/C).

0 20 40 60 80 100
% Entailed

0.0

0.2

0.4

0.6

0.8

1.0 WikiBio-Systems

BLEU
BLEU-T
RG-F
PARENT-W

0 20 40 60 80 100
% Entailed

1.0

0.5

0.0

0.5

1.0 WikiBio-Hyperparams

BLEU
BLEU-T
RG-F
PARENT-W

Figure 4: Correlation of the metrics to human judgment
as the percentage of entailed examples in WikiBio is
varied.

5.5 Analysis

In this section we further analyze the performance
of PARENT-W10 under different conditions, and
compare to the other best metrics from Table 2.

Effect of Divergence. To study the correlation
as we vary the number of divergent references,
we also collected binary labels from workers for
whether a reference is entailed by the correspond-
ing table. We define a reference as entailed when it
mentions only information which can be inferred
from the table. Each table and reference pair was
judged by 3 independent workers, and we used the
majority vote as the label for that pair. Overall,
only 38% of the references were labeled as en-
tailed by the table. Fleiss’ κ was 0.30, which in-
dicates a fair agreement. We found the workers
sometimes disagreed on what information can be
reasonably entailed by the table.

Figure 4 shows the correlations as we vary the
percent of entailed examples in the evaluation set
of WikiBio. Each point is obtained by fixing the
desired proportion of entailed examples, and sam-
pling subsets from the full set which satisfy this
proportion. PARENT and RG-F remain stable and
show a high correlation across the entire range,
whereas BLEU and BLEU-T vary a lot. In the hy-
perparams category, the latter two have the worst
correlation when the evaluation set contains only
entailed examples, which may seem surprising.
However, on closer examination we found that this
subset tends to omit a lot of information from the
tables. Systems which produce more information
than these references are penalized by BLEU, but
not in the human evaluation. PARENT overcomes
this issue by measuring recall against the table in
addition to the reference.

10The trends were similar for PARENT-C.



4891

BLEU BLEU-T RG-F PARENT-W PARENT-C

0.556 0.567∗ 0.588∗ 0.598‡ 0.606†

Table 3: Accuracy on making the same judgments
as humans between pairs of generated texts. p <
0.01∗/0.05†/0.10‡: accuracy is significantly higher
than the next best accuracy to the left using a paired
McNemar’s test.

Ablation Study. We check how different com-
ponents in the computation of PARENT contribute
to its correlation to human judgments. Specifi-
cally, we remove the probability w(g) of an n-
gram g being entailed by the table from Eqs. 2
and 5.11 The average correlation for PARENT-W
drops to 0.168 in this case. We also try a variant
of PARENT with λ = 0, which removes the con-
tribution of Table Recall (Eq. 4). The average cor-
relation is 0.328 in this case. With these compo-
nents, the correlation is 0.838, showing that they
are crucial to the performance of PARENT.

Sentence Level Discrimination. Chaganty et al.
(2018) point out that hill-climbing on an automatic
metric is meaningless if that metric has a low
instance-level correlation to human judgments. In
Table 3 we show the average accuracy of the met-
rics in making the same judgments as humans be-
tween pairs of generated texts. Both variants of
PARENT are significantly better than the other
metrics, however the best accuracy is only 60% for
the binary task. This is a challenging task, since
there are typically only subtle differences between
the texts. Achieving higher instance-level accura-
cies will require more sophisticated language un-
derstanding models for evaluation.

5.6 WebNLG Dataset

To check how PARENT correlates with human
judgments when the references are elicited from
humans (and less likely to be divergent), we check
its correlation with the human ratings provided for
the systems competing in the WebNLG challenge
(Gardent et al., 2017). The task is to generate text
describing 1-5 RDF triples (e.g. John E Blaha,
birthPlace, San Antonio), and human ratings were
collected for the outputs of 9 participating systems
on 223 instances. These systems include a mix of
pipelined, statistical and neural methods. Each in-
stance has upto 3 reference texts associated with

11When computing precision we set w(g) = 0, and when
computing recall we set w(g) = 1 for all g.

Metric Grammar Fluency Semantics Avg

METEOR 0.788±0.04 0.792±0.04 0.576±0.06 0.719
ROUGE 0.788±0.04 0.792±0.04 0.576±0.06 0.719
CIDEr 0.804±0.03 0.753±0.04 0.860±0.02 0.806
BLEU 0.858±0.02 0.811±0.03 0.775±0.03 0.815
BLEU-T 0.849±0.02 0.801±0.03 0.816±0.02 0.822
CIDErD 0.838±0.04 0.796±0.04 0.853±0.02 0.829

PARENT-W 0.821±0.03 0.768±0.04 0.887±0.02 0.825
PARENT-C 0.851±0.03 0.809±0.04 0.877±0.02 0.846

Table 4: Average pearson correlation across 500 boot-
strap samples of each metric to human ratings for each
aspect of the generations from the WebNLG challenge.

the RDF triples, which we use for evaluation.
The human ratings were collected on 3 dis-

tinct aspects – grammaticality, fluency and seman-
tics, where semantics corresponds to the degree to
which a generated text agrees with the meaning of
the underlying RDF triples. We report the corre-
lation of several metrics with these ratings in Ta-
ble 4.12 Both variants of PARENT are either com-
petitive or better than the other metrics in terms of
the average correlation to all three aspects. This
shows that PARENT is applicable for high quality
references as well.

While BLEU has the highest correlation for the
grammar and fluency aspects, PARENT does best
for semantics. This suggests that the inclusion of
source tables into the evaluation orients the metric
more towards measuring the fidelity of the content
of the generation. A similar trend is seen compar-
ing BLEU and BLEU-T. As modern neural text
generation systems are typically very fluent, mea-
suring their fidelity is of increasing importance.
Between the two entailment models, PARENT-
C is better due to its higher correlation with the
grammaticality and fluency aspects.

Distribution of λ. The λ parameter in the calcu-
lation of PARENT decides whether to compute re-
call against the table or the reference (Eq. 4). Fig-
ure 5 shows the distribution of the values taken by
1 − λ using the heuristic described in §3 for in-
stances in both WikiBio and WebNLG. For Wik-
iBio, the recall of the references against the table
is generally low, and hence the recall of the gener-
ated text relies more on the table. For WebNLG,
where the references are elicited from humans,
this recall is much higher (often 1.0), and hence

12 We omit extractive evaluation metrics since no extrac-
tion systems are publicly available for this dataset, and devel-
oping one is beyond the scope of this work.



4892

0.0 0.2 0.4 0.6 0.8 1.0
1− λ

0

50

100

150

200

250

300

350

400

F
re

qu
en

cy

WikiBio

WebNLG

Figure 5: Histogram of the recall of the references
against the table (Eq. 6), which is used to set 1 − λ.
Lower values indicate that the metric relies more on
the table and less on the reference.

the recall of the generated text relies more on the
reference.

6 Related Work

Over the years several studies have evaluated au-
tomatic metrics for measuring text generation per-
formance (Callison-Burch et al., 2006; Stent et al.,
2005; Belz and Reiter, 2006; Reiter, 2018; Liu
et al., 2016; Kilickaya et al., 2017; Gatt and Krah-
mer, 2018). The only consensus from these studies
seems to be that no single metric is suitable across
all tasks. A recurring theme is that metrics like
BLEU and NIST (Doddington, 2002) are not suit-
able for judging content quality in NLG. Recently,
Novikova et al. (2017a) did a comprehensive study
of several metrics on the outputs of state-of-the-art
NLG systems, and found that while they showed
acceptable correlation with human judgments at
the system level, they failed to show any correla-
tion at the sentence level. Ours is the first study
which checks the quality of metrics when table-
to-text references are divergent. We show that in
this case even system level correlations can be un-
reliable.

Hallucination (Rohrbach et al., 2018; Lee et al.,
2018) refers to when an NLG system generates
text which mentions extra information than what
is present in the source from which it is generated.
Divergence can be viewed as hallucination in the
reference text itself. PARENT deals with halluci-
nation by discounting n-grams which do not over-
lap with either the reference or the table.

PARENT draws inspiration from iBLEU (Sun
and Zhou, 2012), a metric for evaluating para-
phrase generation, which compares the generated
text to both the source text and the reference.

While iBLEU penalizes texts which match the
source, here we reward such texts since our task
values accuracy of generated text more than the
need for paraphrasing the tabular content (Liu
et al., 2010). Similar to SARI for text simplifica-
tion (Xu et al., 2016) and Q-BLEU for question
generation (Nema and Khapra, 2018), PARENT
falls under the category of task-specific metrics.

7 Conclusions

We study the automatic evaluation of table-to-text
systems when the references diverge from the ta-
ble. We propose a new metric, PARENT, which
shows the highest correlation with humans across
a range of settings with divergent references in
WikiBio. We also perform the first empirical
evaluation of information extraction based metrics
(Wiseman et al., 2017), and find RG-F to be ef-
fective. Lastly, we show that PARENT is compa-
rable to the best existing metrics when references
are elicited by humans on the WebNLG data.

Acknowledgements

Bhuwan Dhingra is supported by a fellowship
from Siemens, and by grants from Google. We
thank Maruan Al-Shedivat, Ian Tenney, Tom
Kwiatkowski, Michael Collins, Slav Petrov, Jason
Baldridge, David Reitter and other members of the
Google AI Language team for helpful discussions
and suggestions. We thank Sam Wiseman for shar-
ing data for an earlier version of this paper. We
also thank the anonymous reviewers for their feed-
back.

References
Srinivas Bangalore, Owen Rambow, and Steve Whit-

taker. 2000. Evaluation metrics for generation. In
Proc. of INLG.

Regina Barzilay and Mirella Lapata. 2005. Collective
content selection for concept-to-text generation. In
Proc. of EMNLP.

Anja Belz and Ehud Reiter. 2006. Comparing auto-
matic and human evaluation of nlg systems. In Proc.
of EACL.

Chris Callison-Burch, Cameron Fordyce, Philipp
Koehn, Christof Monz, and Josh Schroeder. 2007.
(meta-) evaluation of machine translation. In Proc.
of WMT.

Chris Callison-Burch, Miles Osborne, and Philipp
Koehn. 2006. Re-evaluation the role of bleu in ma-
chine translation research. In Proc. of EACL.



4893

Marine Carpuat, Yogarshi Vyas, and Xing Niu. 2017.
Detecting cross-lingual semantic divergence for
neural machine translation. In Proc.of Workshop on
NMT.

Arun Chaganty, Stephen Mussmann, and Percy Liang.
2018. The price of debiasing automatic metrics in
natural language evalaution. In Proc. of ACL.

Boxing Chen and Colin Cherry. 2014. A systematic
comparison of smoothing techniques for sentence-
level bleu. In Proc. of WMT.

Ido Dagan, Oren Glickman, and Bernardo Magnini.
2006. The pascal recognising textual entailment
challenge. In Machine Learning Challenges. Eval-
uating Predictive Uncertainty, Visual Object Classi-
fication, and Recognising Tectual Entailment, pages
177–190, Berlin, Heidelberg. Springer Berlin Hei-
delberg.

Michael Denkowski and Alon Lavie. 2014. Meteor
universal: Language specific translation evaluation
for any target language. In Proc. of WMT.

George Doddington. 2002. Automatic evaluation
of machine translation quality using n-gram co-
occurrence statistics. In Proc. of HLT.

Ondřej Dušek, Jekaterina Novikova, and Verena Rieser.
2019. Evaluating the state-of-the-art of end-to-end
natural language generation: The E2E NLG Chal-
lenge. arXiv preprint arXiv:1901.11528.

Claire Gardent, Anastasia Shimorina, Shashi Narayan,
and Laura Perez-Beltrachini. 2017. Creating train-
ing corpora for micro-planners. In Proc. of ACL.

Albert Gatt and Emiel Krahmer. 2018. Survey of the
state of the art in natural language generation: Core
tasks, applications and evaluation. Journal of Artifi-
cial Intelligence Research, 61:65–170.

Oren Glickman and Ido Dagan. 2005. A probabilistic
setting and lexical cooccurrence model for textual
entailment. In Proceedings of the ACL Workshop on
Empirical Modeling of Semantic Equivalence and
Entailment, pages 43–48. Association for Compu-
tational Linguistics.

Yvette Graham and Timothy Baldwin. 2014. Testing
for significance of increased correlation with human
judgment. In Proc. of EMNLP.

Lifu Huang, Avirup Sil, Heng Ji, and Radu Florian.
2017. Improving slot filling performance with at-
tentive neural networks on dependency structures.

Mert Kilickaya, Aykut Erdem, Nazli Ikizler-Cinbis,
and Erkut Erdem. 2017. Re-evaluating automatic
metrics for image captioning. In Proc. of EACL.

Karen Kukich. 1983. Design of a knowledge-based re-
port generator. In Proc. of ACL.

Rémi Lebret, David Grangier, and Michael Auli. 2016.
Neural text generation from structured data with
application to the biography domain. In Proc. of
EMNLP.

Katherine Lee, Orhan Firat, Ashish Agarwal, Clara
Fannjiang, and David Sussillo. 2018. Hallucinations
in neural machine translation.

Percy Liang, Michael I Jordan, and Dan Klein. 2009.
Learning semantic correspondences with less super-
vision. In Proc. of ACL.

Chin-Yew Lin. 2004. Rouge: A package for automatic
evaluation of summaries. In Proc. of Workshop on
Text Summarization Branches Out.

Chang Liu, Daniel Dahlmeier, and Hwee Tou Ng.
2010. PEM: A paraphrase evaluation metric exploit-
ing parallel texts. In Proc. of EMNLP.

Chia-Wei Liu, Ryan Lowe, Iulian Serban, Mike Nose-
worthy, Laurent Charlin, and Joelle Pineau. 2016.
How not to evaluate your dialogue system: An em-
pirical study of unsupervised evaluation metrics for
dialogue response generation. In Proc. of EMNLP.

Kathleen R. McKeown. 1985. Text Generation: Using
Discourse Strategies and Focus Constraints to Gen-
erate Natural Language Text. Cambridge University
Press, New York, NY, USA.

Preksha Nema and Mitesh M Khapra. 2018. Towards a
better metric for evaluating question generation sys-
tems. In Proc. of EMNLP.

Jekaterina Novikova, Ondřej Dušek, Amanda Cercas
Curry, and Verena Rieser. 2017a. Why we need new
evaluation metrics for NLG. In Proc. of EMNLP.

Jekaterina Novikova, Ondřej Dušek, and Verena Rieser.
2017b. The E2E dataset: New challenges for end-
to-end generation. In Proc. of SIGDIAL.

Kishore Papineni, Salim Roukos, Todd Ward, and Wei-
Jing Zhu. 2002. Bleu: A method for automatic eval-
uation of machine translation. In Proc. of ACL.

Jeffrey Pennington, Richard Socher, and Christopher
Manning. 2014. Glove: Global vectors for word rep-
resentation. In Proceedings of the 2014 conference
on empirical methods in natural language process-
ing (EMNLP), pages 1532–1543.

Ehud Reiter. 2018. A structured review of the validity
of bleu. Computational Linguistics, pages 1–12.

Ehud Reiter and Robert Dale. 1997. Building applied
natural language generation systems. Nat. Lang.
Eng., 3(1):57–87.

Anna Rohrbach, Lisa Anne Hendricks, Kaylee Burns,
Trevor Darrell, and Kate Saenko. 2018. Object hal-
lucination in image captioning. EMNLP.

https://arxiv.org/abs/1901.11528
https://arxiv.org/abs/1901.11528
https://arxiv.org/abs/1901.11528


4894

Abigail See, Peter J. Liu, and Christopher D. Manning.
2017. Get to the point: Summarization with pointer-
generator networks. In Proc. of ACL.

Amanda Stent, Matthew Marge, and Mohit Singhai.
2005. Evaluating evaluation methods for generation
in the presence of variation. In Proc. of CICLing.

Hong Sun and Ming Zhou. 2012. Joint learning of a
dual smt system for paraphrase generation. In Proc.
of ACL.

Kristi Tsukida and Maya R Gupta. 2011. How to
analyze paired comparison data. Technical report,
Washington University Seattle Dept of Electrical
Engineering.

Ramakrishna Vedantam, C Lawrence Zitnick, and Devi
Parikh. 2015. Cider: Consensus-based image de-
scription evaluation. In Proceedings of the IEEE
conference on computer vision and pattern recog-
nition, pages 4566–4575.

Yogarshi Vyas, Xing Niu, and Marine Carpuat. 2018.
Identifying semantic divergences in parallel text
without annotations. In Proc. of NAACL.

Rand R Wilcox. 2016. Comparing dependent robust
correlations. British Journal of Mathematical and
Statistical Psychology, 69(3):215–224.

Sam Wiseman, Stuart M Shieber, and Alexander M
Rush. 2017. Challenges in data-to-document gen-
eration. In Proc. of EMNLP.

Yonghui Wu, Mike Schuster, Zhifeng Chen, Quoc V.
Le, Mohammad Norouzi, Wolfgang Macherey,
Maxim Krikun, Yuan Cao, Qin Gao, Klaus
Macherey, Jeff Klingner, Apurva Shah, Melvin
Johnson, Xiaobing Liu, ÅĄukasz Kaiser, Stephan
Gouws, Yoshikiyo Kato, Taku Kudo, Hideto
Kazawa, Keith Stevens, George Kurian, Nishant
Patil, Wei Wang, Cliff Young, Jason Smith, Jason
Riesa, Alex Rudnick, Oriol Vinyals, Greg Corrado,
Macduff Hughes, and Jeffrey Dean. 2016. Google’s
neural machine translation system: Bridging the gap
between human and machine translation. CoRR,
abs/1609.08144.

Wei Xu, Courtney Napoles, Ellie Pavlick, Quanze
Chen, and Chris Callison-Burch. 2016. Optimizing
statistical machine translation for text simplification.
Transactions of the Association for Computational
Linguistics, 4:401–415.

A Appendices

A.1 Information Extraction System
For evaluation via information extraction (Wise-
man et al., 2017) we train a model for WikiBio
which accepts text as input and generates a table
as the output. Tables in WikiBio are open-domain,
without any fixed schema for which attributes may
be present or absent in an instance. Hence we

Text:
michael dahlquist ( december 22 , 1965 – july 14 , 2005 )
was a drummer in the seattle band silkworm .
Table:
name <C> michael dahlquist <R> birth date <C> 22
december 1965 <R> birth place <C> seattle , washington
<R> death date <C> 14 july 2005 <R> death
place <C> skokie , illinois <R> genres <C> male
<R> occupation(s) <C> drummer <R> instrument
<C> drums

Figure 6: An input-output pair for the information ex-
traction system. <R> and <C> are special symbols
used to separate (attribute, value) pairs and attributes
from values, respectively.

Precision Recall F-score

0.428 0.310 0.351

Table 5: Performance of the Information Extraction
system.

employ the Pointer-Generator Network (PG-Net)
(See et al., 2017) for this purpose. Specifically, we
use a sequence-to-sequence model, whose encoder
and decoder are both single-layer bi-directional
LSTMs. The decoder is augmented with an at-
tention mechanism over the states of the encoder.
Further, it also uses a copy mechanism to option-
ally copy tokens directly from the source text. We
do not use the coverage mechanism of See et al.
(2017) since that is specific to the task of sum-
marization they study. The decoder is trained to
produce a linearized version of the table where the
rows and columns are flattened into a sequence,
and separate by special tokens. Figure 6 shows an
example.

Clearly, since the references are divergent, the
model cannot be expected to produce the entire ta-
ble, and we see some false information being hal-
lucinated after training. Nevertheless, as we show
in §5.4, this system can be used for evaluating gen-
erated texts. After training, we can parse the out-
put sequence along the special tokens <R> and
<C> to get a set of (attribute, value) pairs. Ta-
ble 5 shows the precision, recall and F-score of
these extracted pairs against the ground truth ta-
bles, where the attributes and values are compared
using an exact string match.

A.2 Hyperparameters
After tuning we found the same set of hyperpa-
rameters to work well for both the table-to-text
PG-Net, and the inverse information extraction
PG-Net. The hidden state size of the biLSTMs

http://arxiv.org/abs/1609.08144
http://arxiv.org/abs/1609.08144
http://arxiv.org/abs/1609.08144


4895

Reference vedran nikÅąiÄĞ ( born 5 may 1987 in osijek ) is a croatian football striker . [STOP]
Prediction vedran nikÅąiÄĞ ( born 5 may 1987 ) is a croatian football forward who is currently a free agent . [STOP]

Reference adam whitehead ( born 28 march 1980 ) is a former breaststroke swimmer from coventry , england , who competed at the 2000summer olympics in sydney , australia . [STOP]
Prediction adam whitehead ( born 28 march 1980 ) is an english swimmer . [STOP]

Reference chris fortier is an american dj and founder of the balance record pool as well as co-founder and owner of fade records . [STOP]
Prediction chris fortier ( born in melbourne , florida ) is an american disc jockey and record producer from melbourne , florida . [STOP]

Reference pretty balanced was an american band based in columbus , ohio . [STOP]
Prediction pretty balanced is an american piano band from columbus , ohio . [STOP]

Reference ben street ( born february 13 , 1987 ) is a canadian professional ice hockey player who is a member within the colorado avalancheorganization of the national hockey league . [STOP]

Prediction ben street ( born february 13 , 1987 ) is a canadian professional ice hockey centre currently playing for the colorado avalanche ofthe national hockey league ( nhl ) . [STOP]

Table 6: Sample references and predictions from PG-Net with beam size 8. Information which is absent from the
reference, but can be inferred from the table is in bold. Information which is present in the reference, but cannot
be inferred from the table is in italics.

was set to 200. The input and output vocabularies
were set to 50000 most common words in the cor-
pus, with additional special symbols for table at-
tribute names (such as “birth-date”). The embed-
dings of the tokens in the vocabulary were initial-
ized with Glove (Pennington et al., 2014). Learn-
ing rate of 0.0003 was used during training, with
the Adam optimizer, and a dropout of 0.2 was
also applied to the outputs of the biLSTM. Mod-
els were trained till the loss on the dev set stopped
dropping. Maximum length of a decoded text was
set to 40 tokens, and that of the tables was set to
120 tokens. Various beam sizes and length nor-
malization penalties were applied for the table-to-
text system, which are listed in the main paper.
For the information extraction system, we found
a beam size of 8 and no length penalty to produce
the highest F-score on the dev set.

A.3 Sample Outputs
Table 6 shows some sample references and the cor-
responding predictions from the best performing
model, PG-Net for WikiBio.


